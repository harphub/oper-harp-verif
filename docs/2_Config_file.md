# Create your config file

Create a configuration file for your project using the structure provided in the example configs. The config file is split into options used for pre-processing (`pre`), verification (`verif`), visualisation/output (`post`), and scorecards (`scorecards`). A description of these options is given below. Note that paths specified should already exist on your system as the scripts typically do not assume permission to generate parent directories.

| Type | Option name | Description | Example (s)   |
| ---  | --- | --- | --- |   
| verif | project_name | A descriptive name for the verification project. This is the same as the the project name variable PROJECT in monitor’s configuration file scr/Env_exp. | project_name: "TEST" |
| verif | fcst_model   | The names of the forecast models to consider. | fcst_model: <br> - model_A  <br> - model_B |
| verif | lead_time    | Lead times to consider in the verification e.g. 0 to 48 in steps of 3 hours. `seq` and `c()` will be parsed and evaluated by R. | lead_time: seq(0,48,3) | 
| verif | lead_time_UA | If you want to use specific lead times for upper-air variables. The default is NULL, which means that upper-air variables will use lead times specfied by `verif:lead_time`. Useful if you are verifying a list of surface and upper-air parameters, e.g. "T2m,T,Pmsl", and want to change the lead times used without having to change the config. | Default: <br> lead_time_UA: NULL <br> <br> Use hours 0-24 in steps of 1 for upper-air variables <br> lead_time_UA: seq(0,24,1) | 
| verif | by_step      | Interval (in hours) between cycles to be used for verification i.e. cycles considered are `start_date` to `end_date` in steps of `verif:by_step`. | by_step: "6h" |
| verif | fcst_type    | Forecast type, either `det` or `eps`. | fcst_type: "det" |
| verif | domains      | What SID lists to verify (equivalent to SURFSELECTION/TEMPSELECTION in monitor, where the station lists are defined in scr/selection.pm). The choice "All" will use all stations available in the data. SID lists, either defined explicitly or based on a geographic area, can be defined in `fn_station_selection` (see the documentation below for more information). Alternatively you can select a single SID by using it's SID number as a domain. | domains: <br> -"All" <br> <br> domains: <br> - "IRL" <br> - "IE_EN" <br> <br> Verify domain "IRL" and a single station (SID=3953): <br> domains: <br> - "IRL" <br> - "3953" |
| verif | domains_UA   | What SID lists to verify for upper-air parameters (following same convention as "domains" above). This may be useful if you want to use only certain domains for upper-air verification e.g. a large region containing more radiosondes. If this option is missing or set to NULL then it will default to "domains". | To use "domains" for "domains_UA": <br> domains_UA: <br> - NULL <br> <br> To verify surface parameters over multiple domains but upper-air parameters over one: <br> domains: <br> - "IRL" <br> - "IE_EN" <br> <br> domains_UA: <br> - "IE_EN" | 
| verif | members      | What ensemble members to use in the verification for each `verif:fcst_model`. Set to NULL to use all the members available in each ensemble. Include a list here if the members to be used differ for each of the `verif:fcst_model`. | For a deterministic model or to read all memeber in an ensemble: <br> members: <br> - NULL <br> <br> Specific members from different ensembles: <br> members: <br> - c(1,2,3) <br> - c(4,5,6) |
| verif | lags         | How to lag the ensemble members for each ensemble. Include a list if the lags differ for each of the `verif:fcst_model`. Set to “0h” for no lagging. The parent cycles for lagging are determined by the `start date`, `end date`, and `verif:by_step`. See `harpIO::read_point_forecast` for more information. | For a deterministic model: <br> lags: <br> - "0h" <br> <br> For 3hr lagging in the first ensemble, no lagging in the second: <br> lags: <br> - c("0h","3h") <br> - "0h" |
| verif | shifts       |  Experimental and for deterministic models only! How to shift forecasts forwards/backards in time for each model. Include a list if the shifts differ for each of the `verif:fcst_model`. Set to NULL to do nothing (i.e. default behaviour, equivalent to shifting by zero hours). Use digits only, where the shift is assumed to be in hours. Positive values shift forward in time, negative values backwards. | Default: <br> shifts: <br> - NULL <br> <br> Do not shift first model, but shift second by 6h forward in time: <br> shifts: <br> - "0" <br> - "6" |
| verif | num_ref_members | Number of reference members to use when computing fair scores for an ensemble (e.g. "Inf"). Not used for deterministic models. See `harpPoint::ens_verify` for more details. | num_ref_memebrs: "Inf" |
| verif | ua_fcst_cycle | For upper air variables, do you want to group by fcst_cycle? Either TRUE or FALSE | ua_fcst_cycle: FALSE |
| verif | force_valid_thr | Set to TRUE if you really want threshold scores over valid times/hours. FALSE is generally sufficient. | force_valid_thr: FALSE |
| verif | lt_split | Set to TRUE if you want to split the auxiliary scores (e.g. scatterplots) into "short" (<=24) and "long" (>24) leadtime ranges. Results using all leadtimes will always be generated | lt_split: FALSE |
| verif | fcst_path    | Path to the forecast sqlite tables generated from the vfld. | fcst_path: "/path/to/FCTABLE" |
| verif | obs_path     | Path to the observation sqlite tables generated from the vobs. | obs_path: "/path/to/OBSTBALE" |
| verif | verif_path   | A root directory where the rds verification files are stored. For a given project, these rds files will be located in `verif:verif_path`/`verif:project_name`. | verif_path: "/path/to/rds" |
| pre   | fcst_model   | Carry out the vfld to sqlite conversion for these forecast models. Note that this can differ from `verif:fcst_model` (e.g. the sqlite tables may already exist for some models, and you may want to skip regenerating these). | fcst_model: <br> - model_A  <br> - model_B | 
| pre   | lead_time    | Which lead times to use when converting the vfld. Can differ from `verif:lead_time`. | lead_time: seq(0,48,1) |
| pre   | vfld_path    | Path to where the vfld files are stored (note that the full file names to be read are constructed from `pre:vfld_path` and `pre:vfld_template`). The vfld files for each `pre:fcst_model` should exist in this directory. | vfld_path: "/path/to/vfld" |
| pre   | vfld_by      | Interval (in hours) between cycles to be used when generating the sqlite tables from vfld i.e. read vfld files from `start_date` to `end_date` in steps of `pre:vfld_by`. This can differ from `verif:by_step`. | vfld_by: "3h" |
| pre   | vfld_template | The template used to construct the vfld file names. See `harpIO::show_file_templates`. For deterministic/ensemble experiments, the standard choices are “vfld” and "vfld_eps". If different templates are to be used for different forecast models, then include a `pre:vfld_template` entry corresponding to each forecast model. Custom templates can also be created. | Standard: <br> vfld_template: <br> - "det" <br> <br> Custom: <br> vfld_template: <br> - "{fcst_model}/{YYYY}/{MM}/vfld{fcst_model}{YYYY}{MM}{DD}{HH}{LDT2}" | 
| pre   | vobs_path    | Path to where the vobs files are stored. | vobs_path: "/path/to/vobs" |
| pre   | vobs_by      | Interval (in hours) between the vobs files i.e. read vobs files from `start_date` to `end_date` in steps of `pre:vobs_by`. | vobs_by: "1h" | 
| pre   | custom_asl_path | Path to a specific HARMONIE-AROME allsynop.list to use when converting the vfld data. If not specified, harp's default stationlist is used (`harpCore::station_list`). | custom_asl_path: "/path/to/allsynop.list" | 
| pre   | members      | Which members to read for each ensemble. If only one option is set for members, it will be repeated for each `pre:fcst_model`. Set to NULL for a deterministic experiment. Note: this variable is different from `verif:members` as the two can differ in general. | For deterministic models: <br> members: <br> - NULL <br> <br> For ensembles: <br> - seq(0,6) |
| pre   | lags         | How the ensemble members are lagged for each `pre:fcst_model`. For a given model, `pre:lags` should be the same length as `pre:members`. Include a list if the lags differ for each of the `pre:fcst_model`. Note: this variable is different from `verif:lags` as the notation used for each is different. | For deterministic models: <br> lags: <br> - NULL <br> <br> For ensemble models: <br> lags: <br> - c(0,0,0,0,3,3,3) | 
| pre   | params       | Which parameters to consider when generating the sqlite tables from vfld. See `harpIO::show_harp_parameters` and `harpIO::harp_params` for recognised vfld parameters in harp. Set to NULL to convert everything found. | params: <br> - T2m <br> - Td2m <br> - T <br> <br> To convert everything found in the vfld: <br> params: <br> - NULL |
| post  | plot_output | A root directory indicating where to save the png files generated during the verification process. For a given project, the png files will be stored in `post:plot_output`/`verif:project_name`. Set to "default" to use `verif:verif_path`/archive. | plot_output: "/path/to/png" |
| post  | create_png  | Flag to indicate if png files should be generated. | create_png: TRUE | 
| post  | save_vofp   | Flag to indicate if the verification object used for creating pngs should be saved. Useful for generating images at a later stage. Files will be stored in `post:plot_output`/`verif:project_name`. Default is FALSE. | save_vofp: TRUE |
| post  | save_sidrds | Flag to indicate if the verification object used for SID scores (i.e. maps) should be saved. May be useful for investigating issues with certain stations. Files will be store in `post:plot_output`/`verif:project_name`. Default is FALSE. | save_sidrds: TRUE | 
| post  | cmap        | What palette to use for the line plots. Choose from a palette in "RColorBrewer" or a function from the "pals" package e.g. "trubetskoy". Defaults to "Set2" from RColorBrewer if not specified. | cmap: "trubetskoy" |
| post  | cmap_hex    | What pallete to use for scatterplots. Choose from "paired" (RColorBrewer), "magma", "viridis", or a scico pallette (see scico::scico_pallete_names). Defaults to magma. | cmap_hex: "bukavu" |
| post  | map_cbar_d  | Logcial flag to indicate if a discrete colourbar (with fixed breaks and bounds) should be used in the station map plots as opposed to a continuous one where the bounds change depending on the data. Defaults to "FALSE" if not specified. | map_cbar_discrete: TRUE |
| scorecards | create_scrd | Logical switch to produce scorecard data, save the data, and plot the scorecard. | create_scrd: TRUE | 
| scorecards | ref_model   | The reference model for the scorecards. | ref_model: "old_model" |
| scorecards | fcst_model  | The “new” model for the scorecards (i.e. score differences are `scorecards:fcst_model` - `scorecards:ref_model`). | fcst_model: "new_model" | 
| scorecards | parameters  | Which parameters to plot in the scorecards (parameters appear as ordered here). For upper-air variables, if variable “X” is included in the verification, then you can include individual pressure levels in the scorecard plots by using “X750”, etc. . | parameters: <br> - T2m <br> - Td2m <br> - T925 <br> - T700 |
| scorecards | scores      | Which of the deterministic or ensemble summary scores to plot in the scorecard. These appear from left to right in the scorecard. | Deterministic: <br> scores: <br> - "bias" <br> - "rmse" <br> <br> Ensemble: <br> scores: <br> - "mean_bias" <br> - "spread" |
| scorecards | domains     | Construct scorecards for these domains only (provided they exist in `verif:domains` or `verif:domains_UA`). | domains: <br> - "All" |
| scorecards | pooled_by   | How to pool the data for bootstrapping. See `harpPoint:bootstrap_verify` for more details. | pooled_by: fcst_dttm |
| scorecards | numboot     | Number of bootstrap replicates. See `harpPoint:bootstrap_verify` for more details. Should be “large”. | numboot: 1000 | 
| scorecards | parallel    | Use parallel processing when performing the bootstrapping. | parallel: FALSE | 
| scorecards | num_cores   | Number of cores to use if `parallel=TRUE`. | num_cores: 1 |
| scorecards | plot_signif | As well as the scorecard, plot the actual score difference as a function of leadtime for each parameter and score (provided that `scorecards:create_scrd` is TRUE). Statistical significance of the score difference is also indicated. Uses `fn_plot_signif_diff.R`. | plot_signif: TRUE | 
